# 时间交互网络 (Temporal Interaction Network)

本项目实现了时间交互网络(TIN)的创建、分析和可视化。TIN是一种网络，其中边上标注了节点间交互发生的时间以及转移的数量。

## 功能

本项目包含以下功能：

1. **创建时间交互网络**：从出租车数据中提取必要的字段并构建TIN
2. **统计分析**：计算网络节点数、边数、交互数以及每次行程的平均乘客数
3. **重复模式识别**：识别网络中的重复交互模式（motifs）
4. **数量来源追踪**：追踪网络中转移数量的来源
5. **网络可视化**：可视化TIN网络结构

## 文件说明

- `TIN.py`: 主程序，实现TIN类及其功能
- `preprocess_taxi_data.py`: 数据预处理脚本，处理原始出租车数据
- `requirements.txt`: 项目依赖包列表
- `yellow_taxi.csv`: 原始数据文件（未包含在仓库中）
- `tin_output.txt`: 处理后的TIN数据文件（程序自动生成）
- `tin_network.png`: 网络可视化图像（程序自动生成）

## 安装与使用

1. 安装依赖项：

```bash
pip install -r requirements.txt
```

2. 运行程序：

```bash
python TIN.py
```

注意：程序会自动处理数据并生成TIN网络，首次运行可能需要较长时间。

## 实现细节

- 预处理脚本会处理CSV文件的前100,000条记录以提高效率
- TIN网络将地点ID作为节点，行程作为交互
- 重复模式识别使用时间窗口（默认1小时）来识别频繁发生的交互
- 可视化结果会自动保存为PNG图像

## 数据格式

TIN数据存储为制表符分隔的文本文件，格式为：`源节点 目标节点 时间 流量`